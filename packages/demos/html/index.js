function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function a(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function l(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function p(t,e,n){t.classList[n?"add":"remove"](e)}let y;function m(t){y=t}const $=[],b=[],v=[],x=[],M=Promise.resolve();let w=!1;function D(t){v.push(t)}let k=!1;const O=new Set;function Y(){if(!k){k=!0;do{for(let t=0;t<$.length;t+=1){const e=$[t];m(e),_(e.$$)}for(m(null),$.length=0;b.length;)b.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];O.has(e)||(O.add(e),e())}v.length=0}while($.length);for(;x.length;)x.pop()();w=!1,k=!1,O.clear()}}function _(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(D)}}const H=new Set;function F(t,e){-1===t.$$.dirty[0]&&($.push(t),w||(w=!0,M.then(Y)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function T(o,c,s,l,u,d,f=[-1]){const h=y;m(o);const g=c.props||{},p=o.$$={fragment:null,ctx:null,props:d,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:f,skip_bound:!1};let $=!1;if(p.ctx=s?s(o,g,(t,e,...n)=>{const r=n.length?n[0]:e;return p.ctx&&u(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),$&&F(o,t)),e}):[],p.update(),$=!0,r(p.before_update),p.fragment=!!l&&l(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(i)}else p.fragment&&p.fragment.c();c.intro&&((b=o.$$.fragment)&&b.i&&(H.delete(b),b.i(v))),function(t,n,o){const{fragment:c,on_mount:s,on_destroy:i,after_update:l}=t.$$;c&&c.m(n,o),D(()=>{const n=s.map(e).filter(a);i?i.push(...n):r(n),t.$$.on_mount=[]}),l.forEach(D)}(o,c.target,c.anchor),Y()}var b,v;m(h)}let L;function E(t){const e=t.getDay();return e>=1&&e<=5}function S(t){const e=t.getDay();return 6===e||0===e}function W(t){const e=t.getDay();return 0===e?7:e}function A(t){return t.getMonth()+1}function C(t){const{year:e,month:n,day:r}=N(t);return j(e,n,r)}function N(t){return{year:t.getFullYear(),month:A(t),day:t.getDate(),weekDay:W(t),dayOfYear:I(t),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()}}function j(t,e,n){return new Date(t,e-1,n)}function I(t){const e=j(t.getFullYear(),1,1);return(t.valueOf()-e.valueOf())/1e3/3600/24+1}var P;"function"==typeof HTMLElement&&(L=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}),function(t){t.Year="Year",t.Month="Month",t.Week="Week",t.WorkDay="WorkDay",t.Weekend="Weekend",t.Day="Day",t.Hour="Hour",t.Minute="Minute",t.Second="Second"}(P||(P={}));const R=[1,2,3,4,5,6,7],q=[1,2,3,4,5],B=[6,7];function J(t,e){const n={};return V(t)&&V(e)&&Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{value:e[r]-t[r]})}),n}function z(t){return"number"==typeof t&&!isNaN(t)}function G(t){return Number.isInteger(t)}function K(t){return G(t)&&t>0}function Q(t,e){return t===e?0:(e-t)/Math.abs(e-t)}function U(t,e){return z(t)&&z(e)?Array(Math.abs(e-t)+1).fill(0).map((n,r)=>t+r*Q(t,e)):Array(t).fill(0).map((t,e)=>e)}function V(t){return null!=t}function X(t){return t[t.length-1]}function Z(t,e){return V(t)?t:e}function tt(t){return t>=1?Math.round(t):1}function et(t,e){return new Date(t,e,0).getDate()}function nt(t,e){const n=[];for(let r=0;r<et(t,e);r++)n.push(j(t,e,r+1));return n}function rt(t,e){const n=nt(t,e);for(;W(n[0])>1;){const t=N(n[0]);n.unshift(j(t.year,t.month,t.day-1))}for(;7!==W(X(n));){const t=N(X(n));n.push(j(t.year,t.month,t.day+1))}return n}function at({year:t,month:e},n){const{year:r,month:a}=N(new Date(t,e+n-1));return{year:r,month:a}}function ot(t,e){return J(N(t),N(e))}function ct(t){return Math.floor(t/1e3/3600/24)}function st(t){return Math.floor(t/1e3/3600/24/7)}function it(t,e){return ct(e.valueOf()-t.valueOf())+1}function lt(t,e){for(;1!==W(t);)t=ht(t,-1);for(;7!==W(e);)e=ht(e,1);return Math.floor(it(t,e)/7)}function ut(t,e,n){let r=0;for(;1!==W(t);)n.includes(W(t))&&r++,t=ht(t,1);for(;7!==W(e);)n.includes(W(e))&&r++,e=ht(e,-1);return r+=it(t,e)/7*pt(n).length,r}function dt(t,e){return ut(t,e,q)}function ft(t,e){return ut(t,e,B)}function ht(t,e){const n=new Date(t.valueOf());return n.setDate(n.getDate()+e),n}function gt(t){return R.includes(t)}function pt(t){const e=new Set;for(const n of t)gt(n)&&e.add(n);return Array.from(e)}function yt(t){const e=j(t,1,1);return(j(t+1,1,1).valueOf()-e.valueOf())/1e3/3600/24}var mt;!function(t){t.Interval="Interval",t.DayOfWeek="DayOfWeek",t.DayOfMonth="DayOfMonth",t.DayOfYear="DayOfYear",t.MonthDay="MonthDay"}(mt||(mt={}));const $t=new Map;function bt(t,e){$t.set(t,e)}function vt(t,e){return e.start=C(e.start),{id:Symbol(),title:t.title,description:t.description,start:t.start,end:t.end,repeat:e}}function xt(t){return t.map(t=>(t.repeat.start=new Date(t.repeat.start),t.repeat.end&&(t.repeat.end=new Date(t.repeat.end)),t.id=Symbol(),t))}function Mt(t){try{return xt(JSON.parse(t))}catch(t){return[]}}function wt(t,e,n=[]){return rt(t,e).map(t=>({date:t,day:t.getDate(),events:n.filter(e=>function(t,e){t=C(t);const{repeat:n}=e;if(t<C(n.start))return!1;if(V(n.end)&&t>C(n.end))return!1;const r=$t.get(n.type);return!(!r||!r(t,n))}(t,e))}))}function Dt(t,e,n){const r=t.slice();return r[13]=e[n],r}function kt(t,e,n){const r=t.slice();return r[10]=e[n],r}function Ot(t){let e;return{c(){e=u("div"),h(e,"class","today-mark")},m(t,n){s(t,e,n)},d(t){t&&i(e)}}}function Yt(t){let e,n,r,a,o,l,p,y,m,$,b=Tt(t[13].start.hour,2,"0")+"",v=Tt(t[13].start.minute,2,"0")+"",x=Tt(t[13].start.second,2,"0")+"",M=t[13].title+"";return{c(){e=u("div"),n=u("span"),r=d(b),a=d(":"),o=d(v),l=d(":"),p=d(x),y=f(),m=u("span"),$=d(M),h(e,"class","calendar-event")},m(t,i){s(t,e,i),c(e,n),c(n,r),c(n,a),c(n,o),c(n,l),c(n,p),c(e,y),c(e,m),c(m,$)},p(t,e){2&e&&b!==(b=Tt(t[13].start.hour,2,"0")+"")&&g(r,b),2&e&&v!==(v=Tt(t[13].start.minute,2,"0")+"")&&g(o,v),2&e&&x!==(x=Tt(t[13].start.second,2,"0")+"")&&g(p,x),2&e&&M!==(M=t[13].title+"")&&g($,M)},d(t){t&&i(e)}}}function _t(t){let e,n,r,a,o,y,m,$=t[10].date.getMonth()===t[2].getMonth()&&t[10].date.getFullYear()===t[2].getFullYear()&&t[10].date.getDate()===t[2].getDate(),b=t[10].day+"",v=$&&Ot(),x=t[10].events,M=[];for(let e=0;e<x.length;e+=1)M[e]=Yt(Dt(t,x,e));return{c(){e=u("div"),v&&v.c(),n=f(),r=u("p"),a=d(b),o=d(" 日"),y=f();for(let t=0;t<M.length;t+=1)M[t].c();m=f(),h(r,"class","calendar-date-text"),h(e,"class","calendar-date"),p(e,"grey",t[10].date.getMonth()+1!==t[0]),p(e,"today",t[10].date.getMonth()===t[2].getMonth()&&t[10].date.getFullYear()===t[2].getFullYear()&&t[10].date.getDate()===t[2].getDate())},m(t,i){s(t,e,i),v&&v.m(e,null),c(e,n),c(e,r),c(r,a),c(r,o),c(e,y);for(let t=0;t<M.length;t+=1)M[t].m(e,null);c(e,m)},p(t,r){if(2&r&&($=t[10].date.getMonth()===t[2].getMonth()&&t[10].date.getFullYear()===t[2].getFullYear()&&t[10].date.getDate()===t[2].getDate()),$?v||(v=Ot(),v.c(),v.m(e,n)):v&&(v.d(1),v=null),2&r&&b!==(b=t[10].day+"")&&g(a,b),2&r){let n;for(x=t[10].events,n=0;n<x.length;n+=1){const a=Dt(t,x,n);M[n]?M[n].p(a,r):(M[n]=Yt(a),M[n].c(),M[n].m(e,m))}for(;n<M.length;n+=1)M[n].d(1);M.length=x.length}3&r&&p(e,"grey",t[10].date.getMonth()+1!==t[0]),6&r&&p(e,"today",t[10].date.getMonth()===t[2].getMonth()&&t[10].date.getFullYear()===t[2].getFullYear()&&t[10].date.getDate()===t[2].getDate())},d(t){t&&i(e),v&&v.d(),l(M,t)}}}function Ht(e){let n,r,a,o,d,g,p,y,m,$,b,v,x,M,w,D=e[1],k=[];for(let t=0;t<D.length;t+=1)k[t]=_t(kt(e,D,t));return{c(){n=u("div"),r=u("div"),r.innerHTML='<p class="calendar-date-text">星期一</p>',a=f(),o=u("div"),o.innerHTML='<p class="calendar-date-text">星期二</p>',d=f(),g=u("div"),g.innerHTML='<p class="calendar-date-text">星期三</p>',p=f(),y=u("div"),y.innerHTML='<p class="calendar-date-text">星期四</p>',m=f(),$=u("div"),$.innerHTML='<p class="calendar-date-text">星期五</p>',b=f(),v=u("div"),v.innerHTML='<p class="calendar-date-text">星期六</p>',x=f(),M=u("div"),M.innerHTML='<p class="calendar-date-text">星期日</p>',w=f();for(let t=0;t<k.length;t+=1)k[t].c();var e,c,s;this.c=t,h(r,"class","calendar-header"),h(o,"class","calendar-header"),h(g,"class","calendar-header"),h(y,"class","calendar-header"),h($,"class","calendar-header"),h(v,"class","calendar-header"),h(M,"class","calendar-header"),h(n,"class","calendar"),e="--calendar-date-width",c=Ft,n.style.setProperty(e,c,s?"important":"")},m(t,e){s(t,n,e),c(n,r),c(n,a),c(n,o),c(n,d),c(n,g),c(n,p),c(n,y),c(n,m),c(n,$),c(n,b),c(n,v),c(n,x),c(n,M),c(n,w);for(let t=0;t<k.length;t+=1)k[t].m(n,null)},p(t,[e]){if(7&e){let r;for(D=t[1],r=0;r<D.length;r+=1){const a=kt(t,D,r);k[r]?k[r].p(a,e):(k[r]=_t(a),k[r].c(),k[r].m(n,null))}for(;r<k.length;r+=1)k[r].d(1);k.length=D.length}},i:t,o:t,d(t){t&&i(n),l(k,t)}}}bt(mt.Interval,(t,e)=>{const n=tt(Z(e.interval,1)),r=it(C(e.start),C(t));return(r-1)%n==0&&(!V(e.times)||r<=n*e.times)}),bt(mt.DayOfWeek,(t,e)=>{const n=tt(Z(e.interval,1)),r=Z(e.days,R);if(!r.includes(W(t)))return!1;const a=lt(e.start,t);if((a-1)%n!=0)return!1;if(V(e.weeks)&&a>e.weeks*n)return!1;if(V(e.times)){let o=ut(C(e.start),C(t),r);return o-=(a-1)/n*(n-1)*r.length,o<=e.times}return!0}),bt(mt.DayOfMonth,(t,e)=>{const{day:n,month:r}=N(t);return!(!e.days.includes(n)||V(e.months)&&!e.months.includes(r)||(V(e.times)&&console.log("times option for [DayOfMonth] is not supported now"),0))}),bt(mt.DayOfYear,(t,e)=>{throw new Error("Handler not implemented")}),bt(mt.MonthDay,(t,e)=>{const n=j(e.start.getFullYear(),e.month,e.day),{year:r,month:a,day:o}=ot(n,C(t));return!(0!==a||0!==o||V(e.interval)&&(r-(n<C(e.start)?1:0))%e.interval!=0||V(e.times)&&r+(n<C(e.start)?0:1)>Z(e.interval,1)*e.times)});let Ft="160px";function Tt(t,e,n){let r=""+t;for(;r.length<e;)r=n+r;return r}function Lt(t,e,n){const r=new Date;let a,o,c,s,{year:i}=e,{month:l}=e,{events:u}=e;return t.$$set=t=>{"year"in t&&n(5,i=t.year),"month"in t&&n(6,l=t.month),"events"in t&&n(7,u=t.events)},t.$$.update=()=>{32&t.$$.dirty&&n(8,a=i?parseInt(i):r.getFullYear()),64&t.$$.dirty&&n(0,o=l?parseInt(l):r.getMonth()+1),128&t.$$.dirty&&n(9,c=Mt(u)),512&t.$$.dirty&&console.log(c),769&t.$$.dirty&&n(1,s=wt(a,o,c))},[o,s,r,"100vh","100vw",i,l,u]}class Et extends L{constructor(t){super(),this.shadowRoot.innerHTML='<style>.calendar{display:grid;width:calc((var(--calendar-date-width) + 1px) * 7);grid-template-columns:repeat(7, var(--calendar-date-width));grid-auto-rows:auto;grid-gap:1px;box-shadow:0 6.4px 14.4px 0 rgba(0, 0, 0, 0.132),\n      0 1.2px 3.6px 0 rgba(0, 0, 0, 0.108)}.calendar-header{box-shadow:0 0 0 1px rgb(236, 236, 236);display:flex;flex-direction:column;padding:0;font-weight:bold;cursor:default}.calendar-date{box-shadow:0 0 0 1px rgb(236, 236, 236);display:flex;flex-direction:column;padding:0;transition:ease-in 0.13s;height:130px;cursor:default;position:relative}.calendar-date:hover{background-color:rgba(128, 128, 128, 0.17)}.calendar-date-text{padding:0 10px}.calendar-event{color:black;background-color:rgb(0, 0, 255, 0.3);font-weight:normal;display:flex;justify-content:space-between;position:relative;padding:0 6px;align-items:center;height:30px;line-height:30px;cursor:pointer}.calendar-event::before{content:"";display:block;width:4px;height:100%;position:absolute;left:0;top:0;bottom:0;background-color:rgb(0, 0, 255, 0.7)}.grey{color:#9a9a9a;box-shadow:0 0 0 1px rgb(230, 230, 230);background-color:rgb(243 243 243)}.grey:hover{background-color:rgb(243 243 243)}.today{font-weight:bold}.today-mark{position:absolute;left:0;right:0;top:0;height:7px;background-color:rgb(9, 121, 226)}</style>',T(this,{target:this.shadowRoot},Lt,Ht,o,{height:3,width:4,year:5,month:6,events:7}),t&&(t.target&&s(t.target,this,t.anchor),t.props&&(this.$set(t.props),Y()))}static get observedAttributes(){return["height","width","year","month","events"]}get height(){return this.$$.ctx[3]}get width(){return this.$$.ctx[4]}get year(){return this.$$.ctx[5]}set year(t){this.$set({year:t}),Y()}get month(){return this.$$.ctx[6]}set month(t){this.$set({month:t}),Y()}get events(){return this.$$.ctx[7]}set events(t){this.$set({events:t}),Y()}}export{Et as CalendarElement,mt as RepeatTypes,P as TimeUnits,R as WeekDays,B as WeekendDays,q as WorkDays,ht as addDays,at as addMonths,vt as createEvent,xt as createEvents,I as dayOfYear,it as daysBetween,ct as daysOf,et as daysOfMonth,yt as daysOfYear,J as diff,ot as diffTime,C as eraseTime,N as extract,wt as getCalendarMonth,rt as getCalendarMonthDates,Z as getDefault,A as getMonth,nt as getMonthDates,W as getWeekDay,Q as increaseSign,V as isDefined,G as isInt,z as isNum,K as isPositiveInt,gt as isWeekDay,S as isWeekend,E as isWorkDay,X as lastOf,j as normalDate,Mt as parseEvents,U as range,tt as toPositiveInt,pt as weekDayFilter,ut as weekDaysBetween,ft as weekendDaysBetween,lt as weeksBetween,st as weeksOf,dt as workDaysBetween};
//# sourceMappingURL=index.js.map
