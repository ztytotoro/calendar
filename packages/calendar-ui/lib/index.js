function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function l(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function h(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t){return""===t?null:+t}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}function v(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function b(t,e,n){t.classList[n?"add":"remove"](e)}let $;function x(t){$=t}const D=[],w=[],k=[],M=[],O=Promise.resolve();let Y=!1;function _(t){k.push(t)}let F=!1;const E=new Set;function W(){if(!F){F=!0;do{for(let t=0;t<D.length;t+=1){const e=D[t];x(e),C(e.$$)}for(x(null),D.length=0;w.length;)w.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];E.has(e)||(E.add(e),e())}k.length=0}while(D.length);for(;M.length;)M.pop()();Y=!1,F=!1,E.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const H=new Set;function j(t,e){-1===t.$$.dirty[0]&&(D.push(t),Y||(Y=!0,O.then(W)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function S(a,u,i,s,l,d,f=[-1]){const h=$;x(a);const g=u.props||{},p=a.$$={fragment:null,ctx:null,props:d,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:f,skip_bound:!1};let y=!1;if(p.ctx=i?i(a,g,(t,e,...n)=>{const r=n.length?n[0]:e;return p.ctx&&l(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),y&&j(a,t)),e}):[],p.update(),y=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),u.target){if(u.hydrate){const t=function(t){return Array.from(t.childNodes)}(u.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();u.intro&&((m=a.$$.fragment)&&m.i&&(H.delete(m),m.i(v))),function(t,n,a){const{fragment:u,on_mount:i,on_destroy:c,after_update:s}=t.$$;u&&u.m(n,a),_(()=>{const n=i.map(e).filter(o);c?c.push(...n):r(n),t.$$.on_mount=[]}),s.forEach(_)}(a,u.target,u.anchor),W()}var m,v;x(h)}let A;function L(t){const e=t.getDay();return 0===e?7:e}function P(t){return t.getMonth()+1}function T(t){const{year:e,month:n,day:r}=I(t);return N(e,n,r)}function I(t){return{year:t.getFullYear(),month:P(t),day:t.getDate(),weekDay:L(t),dayOfYear:R(t),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()}}function N(t,e,n){return new Date(t,e-1,n)}function R(t){const e=N(t.getFullYear(),1,1);return(t.valueOf()-e.valueOf())/1e3/3600/24+1}var q;"function"==typeof HTMLElement&&(A=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}),function(t){t.Year="Year",t.Month="Month",t.Week="Week",t.WorkDay="WorkDay",t.Weekend="Weekend",t.Day="Day",t.Hour="Hour",t.Minute="Minute",t.Second="Second"}(q||(q={}));const B=[1,2,3,4,5,6,7];function z(t){return null!=t}function G(t){return t[t.length-1]}function J(t,e){return z(t)?t:e}function K(t){return t>=1?Math.round(t):1}function Q(t,e){return new Date(t,e,0).getDate()}function U(t,e){const n=function(t,e){const n=[];for(let r=0;r<Q(t,e);r++)n.push(N(t,e,r+1));return n}(t,e);for(;L(n[0])>1;){const t=I(n[0]);n.unshift(N(t.year,t.month,t.day-1))}for(;7!==L(G(n));){const t=I(G(n));n.push(N(t.year,t.month,t.day+1))}return n}function V({year:t,month:e},n){const{year:r,month:o}=I(new Date(t,e+n-1));return{year:r,month:o}}function X(t,e){return function(t,e){const n={};return z(t)&&z(e)&&Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{value:e[r]-t[r]})}),n}(I(t),I(e))}function Z(t,e){return n=e.valueOf()-t.valueOf(),Math.floor(n/1e3/3600/24)+1;var n}function tt(t,e,n){let r=0;for(;1!==L(t);)n.includes(L(t))&&r++,t=et(t,1);for(;7!==L(e);)n.includes(L(e))&&r++,e=et(e,-1);return r+=Z(t,e)/7*function(t){const e=new Set;for(const n of t)nt(n)&&e.add(n);return Array.from(e)}(n).length,r}function et(t,e){const n=new Date(t.valueOf());return n.setDate(n.getDate()+e),n}function nt(t){return B.includes(t)}var rt;!function(t){t.Interval="Interval",t.DayOfWeek="DayOfWeek",t.DayOfMonth="DayOfMonth",t.DayOfYear="DayOfYear",t.MonthDay="MonthDay"}(rt||(rt={}));const ot=new Map;function at(t,e){ot.set(t,e)}function ut(t,e){return Object.defineProperty(t,"id",{value:Symbol()}),e.start=T(e.start),Object.defineProperty(t,"repeat",{value:e}),t}function it(t,e,n=[]){return U(t,e).map(t=>({date:t,day:t.getDate(),events:n.filter(e=>function(t,e){t=T(t);const{repeat:n}=e;if(t<T(n.start))return!1;if(z(n.end)&&t>T(n.end))return!1;const r=ot.get(n.type);return!(!r||!r(t,n))}(t,e))}))}at(rt.Interval,(t,e)=>{const n=K(J(e.interval,1)),r=Z(T(e.start),T(t));return(r-1)%n==0&&(!z(e.times)||r<=n*e.times)}),at(rt.DayOfWeek,(t,e)=>{const n=K(J(e.interval,1)),r=J(e.days,B);if(!r.includes(L(t)))return!1;const o=function(t,e){for(;1!==L(t);)t=et(t,-1);for(;7!==L(e);)e=et(e,1);return Math.floor(Z(t,e)/7)}(e.start,t);if((o-1)%n!=0)return!1;if(z(e.weeks)&&o>e.weeks*n)return!1;if(z(e.times)){let a=tt(T(e.start),T(t),r);return a-=(o-1)/n*(n-1)*r.length,a<=e.times}return!0}),at(rt.DayOfMonth,(t,e)=>{const{day:n,month:r}=I(t);return!(!e.days.includes(n)||z(e.months)&&!e.months.includes(r)||(z(e.times)&&console.log("times option for [DayOfMonth] is not supported now"),0))}),at(rt.DayOfYear,(t,e)=>{throw new Error("Handler not implemented")}),at(rt.MonthDay,(t,e)=>{const n=N(e.start.getFullYear(),e.month,e.day),{year:r,month:o,day:a}=X(n,T(t));return!(0!==o||0!==a||z(e.interval)&&(r-(n<T(e.start)?1:0))%e.interval!=0||z(e.times)&&r+(n<T(e.start)?0:1)>J(e.interval,1)*e.times)});const ct=[ut({title:"吔💩",description:"真香",start:{hour:12,minute:0,second:0},end:{hour:12,minute:0,second:0}},{type:rt.Interval,start:new Date,times:4,interval:4}),ut({title:"开🚗",description:"真xuan",start:{hour:12,minute:0,second:0},end:{hour:12,minute:0,second:0}},{type:rt.DayOfWeek,start:new Date,days:[1,2,3],times:5,weeks:5,interval:3}),ut({title:"看😎",description:"Happy",start:{hour:12,minute:0,second:0},end:{hour:12,minute:0,second:0}},{type:rt.DayOfMonth,start:new Date("2020-1-1"),days:[1,2,3,31],months:[1,2,3,10],times:11}),ut({title:"🎂每年",description:"Haha",start:{hour:12,minute:0,second:0},end:{hour:12,minute:0,second:0}},{type:rt.MonthDay,start:new Date("2020-6-6"),month:6,day:5,interval:2,times:1})];function st(t,e,n){const r=t.slice();return r[14]=e[n],r}function lt(t,e,n){const r=t.slice();return r[11]=e[n],r}function dt(t){let e;return{c(){e=d(" 📅")},m(t,n){i(t,e,n)},d(t){t&&c(e)}}}function ft(t){let e,n,r,o,a,s,h,p,m,v,b=yt(t[14].start.hour,2,"0")+"",$=yt(t[14].start.minute,2,"0")+"",x=yt(t[14].start.second,2,"0")+"",D=t[14].title+"";return{c(){e=l("div"),n=l("span"),r=d(b),o=d(":"),a=d($),s=d(":"),h=d(x),p=f(),m=l("span"),v=d(D),g(e,"class","calendar-event")},m(t,c){i(t,e,c),u(e,n),u(n,r),u(n,o),u(n,a),u(n,s),u(n,h),u(e,p),u(e,m),u(m,v)},p(t,e){4&e&&b!==(b=yt(t[14].start.hour,2,"0")+"")&&y(r,b),4&e&&$!==($=yt(t[14].start.minute,2,"0")+"")&&y(a,$),4&e&&x!==(x=yt(t[14].start.second,2,"0")+"")&&y(h,x),4&e&&D!==(D=t[14].title+"")&&y(v,D)},d(t){t&&c(e)}}}function ht(t){let e,n,r,o,a,h,p=t[11].day+"",m=t[11].date.getMonth()===t[3].getMonth()&&t[11].date.getFullYear()===t[3].getFullYear()&&t[11].date.getDate()===t[3].getDate(),v=m&&dt(),$=t[11].events,x=[];for(let e=0;e<$.length;e+=1)x[e]=ft(st(t,$,e));return{c(){e=l("div"),n=l("p"),r=d(p),o=d(" 日"),v&&v.c(),a=f();for(let t=0;t<x.length;t+=1)x[t].c();h=f(),g(n,"class","calendar-date-text"),g(e,"class","calendar-date"),b(e,"grey",t[11].date.getMonth()+1!==t[1]),b(e,"today",t[11].date.getMonth()===t[3].getMonth()&&t[11].date.getFullYear()===t[3].getFullYear()&&t[11].date.getDate()===t[3].getDate())},m(t,c){i(t,e,c),u(e,n),u(n,r),u(n,o),v&&v.m(n,null),u(e,a);for(let t=0;t<x.length;t+=1)x[t].m(e,null);u(e,h)},p(t,o){if(4&o&&p!==(p=t[11].day+"")&&y(r,p),4&o&&(m=t[11].date.getMonth()===t[3].getMonth()&&t[11].date.getFullYear()===t[3].getFullYear()&&t[11].date.getDate()===t[3].getDate()),m?v||(v=dt(),v.c(),v.m(n,null)):v&&(v.d(1),v=null),4&o){let n;for($=t[11].events,n=0;n<$.length;n+=1){const r=st(t,$,n);x[n]?x[n].p(r,o):(x[n]=ft(r),x[n].c(),x[n].m(e,h))}for(;n<x.length;n+=1)x[n].d(1);x.length=$.length}6&o&&b(e,"grey",t[11].date.getMonth()+1!==t[1]),12&o&&b(e,"today",t[11].date.getMonth()===t[3].getMonth()&&t[11].date.getFullYear()===t[3].getFullYear()&&t[11].date.getDate()===t[3].getDate())},d(t){t&&c(e),v&&v.d(),s(x,t)}}}function gt(e){let n,o,a,d,y,b,$,x,D,w,k,M,O,Y,_=e[2],F=[];for(let t=0;t<_.length;t+=1)F[t]=ht(lt(e,_,t));return{c(){n=l("div"),o=l("div"),a=l("input"),d=f(),y=l("input"),b=f(),$=l("div"),x=l("button"),x.textContent="Prev",D=f(),w=l("button"),w.textContent="Next",k=f(),M=l("div");for(let t=0;t<F.length;t+=1)F[t].c();this.c=t,g(a,"type","number"),g(y,"type","number"),v($,"margin","20px 0"),g(M,"class","calendar"),v(M,"--calendar-date-width",pt)},m(t,r){i(t,n,r),u(n,o),u(o,a),m(a,e[0]),u(o,d),u(o,y),m(y,e[1]),u(n,b),u(n,$),u($,x),u($,D),u($,w),u(n,k),u(n,M);for(let t=0;t<F.length;t+=1)F[t].m(M,null);O||(Y=[h(a,"input",e[9]),h(y,"input",e[10]),h(x,"click",e[4]),h(w,"click",e[5])],O=!0)},p(t,[e]){if(1&e&&p(a.value)!==t[0]&&m(a,t[0]),2&e&&p(y.value)!==t[1]&&m(y,t[1]),14&e){let n;for(_=t[2],n=0;n<_.length;n+=1){const r=lt(t,_,n);F[n]?F[n].p(r,e):(F[n]=ht(r),F[n].c(),F[n].m(M,null))}for(;n<F.length;n+=1)F[n].d(1);F.length=_.length}},i:t,o:t,d(t){t&&c(n),s(F,t),O=!1,r(Y)}}}let pt="160px";function yt(t,e,n){let r=""+t;for(;r.length<e;)r=n+r;return r}function mt(t,e,n){let{events:r=ct}=e;const o=new Date;let a,u=o.getFullYear(),i=o.getMonth()+1;return t.$$set=t=>{"events"in t&&n(8,r=t.events)},t.$$.update=()=>{259&t.$$.dirty&&n(2,a=it(u,i,r))},[u,i,a,o,function(){const{year:t,month:e}=V({year:u,month:i},-1);n(0,u=t),n(1,i=e)},function(){const{year:t,month:e}=V({year:u,month:i},1);n(0,u=t),n(1,i=e)},"100vh","100vw",r,function(){u=p(this.value),n(0,u)},function(){i=p(this.value),n(1,i)}]}class vt extends A{constructor(t){super(),this.shadowRoot.innerHTML='<style>.calendar{display:grid;width:calc((var(--calendar-date-width) + 1px) * 7);grid-template-columns:repeat(7, var(--calendar-date-width));grid-auto-rows:130px;grid-gap:1px;box-shadow:0 6.4px 14.4px 0 rgba(0, 0, 0, 0.132),\n      0 1.2px 3.6px 0 rgba(0, 0, 0, 0.108)}.calendar-date{box-shadow:0 0 0 1px rgb(236, 236, 236);display:flex;flex-direction:column;padding:0;transition:ease-in 0.13s}.calendar-date:hover{background-color:rgba(128, 128, 128, 0.17)}.calendar-date-text{padding:0 10px}.calendar-event{color:black;background-color:rgb(0, 0, 255, 0.3);font-weight:normal;display:flex;justify-content:space-between;position:relative;padding:0 6px;align-items:center;height:30px;line-height:30px}.calendar-event::before{content:"";display:block;width:4px;height:100%;position:absolute;left:0;top:0;bottom:0;background-color:rgb(0, 0, 255, 0.7)}.grey{color:#9a9a9a;box-shadow:0 0 0 1px rgb(230, 230, 230);background-color:rgb(243 243 243)}.grey:hover{background-color:rgb(243 243 243)}.today{font-weight:bold}</style>',S(this,{target:this.shadowRoot},mt,gt,a,{height:6,width:7,events:8}),t&&(t.target&&i(t.target,this,t.anchor),t.props&&(this.$set(t.props),W()))}static get observedAttributes(){return["height","width","events"]}get height(){return this.$$.ctx[6]}get width(){return this.$$.ctx[7]}get events(){return this.$$.ctx[8]}set events(t){this.$set({events:t}),W()}}export{vt as Calendar};
//# sourceMappingURL=index.js.map
