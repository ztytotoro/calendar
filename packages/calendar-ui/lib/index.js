function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function a(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function l(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function h(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t){return""===t?null:+t}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}function v(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function b(t,e,n){t.classList[n?"add":"remove"](e)}let x;function $(t){x=t}const w=[],D=[],M=[],k=[],O=Promise.resolve();let Y=!1;function _(t){M.push(t)}let H=!1;const L=new Set;function F(){if(!H){H=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];$(e),T(e.$$)}for($(null),w.length=0;D.length;)D.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];L.has(e)||(L.add(e),e())}M.length=0}while(w.length);for(;k.length;)k.pop()();Y=!1,H=!1,L.clear()}}function T(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const E=new Set;function W(t,e){-1===t.$$.dirty[0]&&(w.push(t),Y||(Y=!0,O.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function C(o,i,c,l,u,d,f=[-1]){const h=x;$(o);const g=i.props||{},p=o.$$={fragment:null,ctx:null,props:d,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:f,skip_bound:!1};let y=!1;if(p.ctx=c?c(o,g,(t,e,...n)=>{const r=n.length?n[0]:e;return p.ctx&&u(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),y&&W(o,t)),e}):[],p.update(),y=!0,r(p.before_update),p.fragment=!!l&&l(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(s)}else p.fragment&&p.fragment.c();i.intro&&((m=o.$$.fragment)&&m.i&&(E.delete(m),m.i(v))),function(t,n,o){const{fragment:i,on_mount:c,on_destroy:s,after_update:l}=t.$$;i&&i.m(n,o),_(()=>{const n=c.map(e).filter(a);s?s.push(...n):r(n),t.$$.on_mount=[]}),l.forEach(_)}(o,i.target,i.anchor),F()}var m,v;$(h)}let j;function S(t){const e=t.getDay();return 0===e?7:e}function A(t){return t.getMonth()+1}function P(t){const{year:e,month:n,day:r}=I(t);return N(e,n,r)}function I(t){return{year:t.getFullYear(),month:A(t),day:t.getDate(),weekDay:S(t),dayOfYear:R(t),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()}}function N(t,e,n){return new Date(t,e-1,n)}function R(t){const e=N(t.getFullYear(),1,1);return(t.valueOf()-e.valueOf())/1e3/3600/24+1}var q;"function"==typeof HTMLElement&&(j=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}),function(t){t.Year="Year",t.Month="Month",t.Week="Week",t.WorkDay="WorkDay",t.Weekend="Weekend",t.Day="Day",t.Hour="Hour",t.Minute="Minute",t.Second="Second"}(q||(q={}));const B=[1,2,3,4,5,6,7];function z(t){return null!=t}function G(t){return t[t.length-1]}function J(t,e){return z(t)?t:e}function K(t){return t>=1?Math.round(t):1}function Q(t,e){return new Date(t,e,0).getDate()}function U(t,e){const n=function(t,e){const n=[];for(let r=0;r<Q(t,e);r++)n.push(N(t,e,r+1));return n}(t,e);for(;S(n[0])>1;){const t=I(n[0]);n.unshift(N(t.year,t.month,t.day-1))}for(;7!==S(G(n));){const t=I(G(n));n.push(N(t.year,t.month,t.day+1))}return n}function V({year:t,month:e},n){const{year:r,month:a}=I(new Date(t,e+n-1));return{year:r,month:a}}function X(t,e){return function(t,e){const n={};return z(t)&&z(e)&&Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{value:e[r]-t[r]})}),n}(I(t),I(e))}function Z(t,e){return n=e.valueOf()-t.valueOf(),Math.floor(n/1e3/3600/24)+1;var n}function tt(t,e,n){let r=0;for(;1!==S(t);)n.includes(S(t))&&r++,t=et(t,1);for(;7!==S(e);)n.includes(S(e))&&r++,e=et(e,-1);return r+=Z(t,e)/7*function(t){const e=new Set;for(const n of t)nt(n)&&e.add(n);return Array.from(e)}(n).length,r}function et(t,e){const n=new Date(t.valueOf());return n.setDate(n.getDate()+e),n}function nt(t){return B.includes(t)}var rt;!function(t){t.Interval="Interval",t.DayOfWeek="DayOfWeek",t.DayOfMonth="DayOfMonth",t.DayOfYear="DayOfYear",t.MonthDay="MonthDay"}(rt||(rt={}));const at=new Map;function ot(t,e){at.set(t,e)}function it(t,e){return Object.defineProperty(t,"id",{value:Symbol()}),e.start=P(e.start),Object.defineProperty(t,"repeat",{value:e}),t}function ct(t,e,n=[]){return U(t,e).map(t=>({date:t,day:t.getDate(),events:n.filter(e=>function(t,e){t=P(t);const{repeat:n}=e;if(t<P(n.start))return!1;if(z(n.end)&&t>P(n.end))return!1;const r=at.get(n.type);return!(!r||!r(t,n))}(t,e))}))}ot(rt.Interval,(t,e)=>{const n=K(J(e.interval,1)),r=Z(P(e.start),P(t));return(r-1)%n==0&&(!z(e.times)||r<=n*e.times)}),ot(rt.DayOfWeek,(t,e)=>{const n=K(J(e.interval,1)),r=J(e.days,B);if(!r.includes(S(t)))return!1;const a=function(t,e){for(;1!==S(t);)t=et(t,-1);for(;7!==S(e);)e=et(e,1);return Math.floor(Z(t,e)/7)}(e.start,t);if((a-1)%n!=0)return!1;if(z(e.weeks)&&a>e.weeks*n)return!1;if(z(e.times)){let o=tt(P(e.start),P(t),r);return o-=(a-1)/n*(n-1)*r.length,o<=e.times}return!0}),ot(rt.DayOfMonth,(t,e)=>{const{day:n,month:r}=I(t);return!(!e.days.includes(n)||z(e.months)&&!e.months.includes(r)||(z(e.times)&&console.log("times option for [DayOfMonth] is not supported now"),0))}),ot(rt.DayOfYear,(t,e)=>{throw new Error("Handler not implemented")}),ot(rt.MonthDay,(t,e)=>{const n=N(e.start.getFullYear(),e.month,e.day),{year:r,month:a,day:o}=X(n,P(t));return!(0!==a||0!==o||z(e.interval)&&(r-(n<P(e.start)?1:0))%e.interval!=0||z(e.times)&&r+(n<P(e.start)?0:1)>J(e.interval,1)*e.times)});const st=[it({title:"吔💩",description:"真香",start:{hour:12,minute:0,second:0},end:{hour:12,minute:0,second:0}},{type:rt.Interval,start:new Date,times:4,interval:4}),it({title:"开🚗",description:"真xuan",start:{hour:12,minute:0,second:0},end:{hour:12,minute:0,second:0}},{type:rt.DayOfWeek,start:new Date,days:[1,2,3],times:5,weeks:5,interval:3}),it({title:"看😎",description:"Happy",start:{hour:12,minute:0,second:0},end:{hour:12,minute:0,second:0}},{type:rt.DayOfMonth,start:new Date("2020-1-1"),days:[1,2,3,25,31],months:[1,2,3,9,10],times:11}),it({title:"🎂每年",description:"Haha",start:{hour:12,minute:0,second:0},end:{hour:12,minute:0,second:0}},{type:rt.MonthDay,start:new Date("2020-6-6"),month:6,day:5,interval:2,times:1})];function lt(t,e,n){const r=t.slice();return r[14]=e[n],r}function ut(t,e,n){const r=t.slice();return r[11]=e[n],r}function dt(t){let e;return{c(){e=u("div"),g(e,"class","today-mark")},m(t,n){c(t,e,n)},d(t){t&&s(e)}}}function ft(t){let e,n,r,a,o,l,h,p,m,v,b=yt(t[14].start.hour,2,"0")+"",x=yt(t[14].start.minute,2,"0")+"",$=yt(t[14].start.second,2,"0")+"",w=t[14].title+"";return{c(){e=u("div"),n=u("span"),r=d(b),a=d(":"),o=d(x),l=d(":"),h=d($),p=f(),m=u("span"),v=d(w),g(e,"class","calendar-event")},m(t,s){c(t,e,s),i(e,n),i(n,r),i(n,a),i(n,o),i(n,l),i(n,h),i(e,p),i(e,m),i(m,v)},p(t,e){4&e&&b!==(b=yt(t[14].start.hour,2,"0")+"")&&y(r,b),4&e&&x!==(x=yt(t[14].start.minute,2,"0")+"")&&y(o,x),4&e&&$!==($=yt(t[14].start.second,2,"0")+"")&&y(h,$),4&e&&w!==(w=t[14].title+"")&&y(v,w)},d(t){t&&s(e)}}}function ht(t){let e,n,r,a,o,h,p,m=t[11].date.getMonth()===t[3].getMonth()&&t[11].date.getFullYear()===t[3].getFullYear()&&t[11].date.getDate()===t[3].getDate(),v=t[11].day+"",x=m&&dt(),$=t[11].events,w=[];for(let e=0;e<$.length;e+=1)w[e]=ft(lt(t,$,e));return{c(){e=u("div"),x&&x.c(),n=f(),r=u("p"),a=d(v),o=d(" 日"),h=f();for(let t=0;t<w.length;t+=1)w[t].c();p=f(),g(r,"class","calendar-date-text"),g(e,"class","calendar-date"),b(e,"grey",t[11].date.getMonth()+1!==t[1]),b(e,"today",t[11].date.getMonth()===t[3].getMonth()&&t[11].date.getFullYear()===t[3].getFullYear()&&t[11].date.getDate()===t[3].getDate())},m(t,s){c(t,e,s),x&&x.m(e,null),i(e,n),i(e,r),i(r,a),i(r,o),i(e,h);for(let t=0;t<w.length;t+=1)w[t].m(e,null);i(e,p)},p(t,r){if(4&r&&(m=t[11].date.getMonth()===t[3].getMonth()&&t[11].date.getFullYear()===t[3].getFullYear()&&t[11].date.getDate()===t[3].getDate()),m?x||(x=dt(),x.c(),x.m(e,n)):x&&(x.d(1),x=null),4&r&&v!==(v=t[11].day+"")&&y(a,v),4&r){let n;for($=t[11].events,n=0;n<$.length;n+=1){const a=lt(t,$,n);w[n]?w[n].p(a,r):(w[n]=ft(a),w[n].c(),w[n].m(e,p))}for(;n<w.length;n+=1)w[n].d(1);w.length=$.length}6&r&&b(e,"grey",t[11].date.getMonth()+1!==t[1]),12&r&&b(e,"today",t[11].date.getMonth()===t[3].getMonth()&&t[11].date.getFullYear()===t[3].getFullYear()&&t[11].date.getDate()===t[3].getDate())},d(t){t&&s(e),x&&x.d(),l(w,t)}}}function gt(e){let n,a,o,d,y,b,x,$,w,D,M,k,O,Y,_,H,L,F,T,E,W,C,j,S,A,P,I,N,R=e[2],q=[];for(let t=0;t<R.length;t+=1)q[t]=ht(ut(e,R,t));return{c(){n=u("div"),a=u("div"),o=u("input"),d=f(),y=u("input"),b=f(),x=u("div"),$=u("button"),$.textContent="Prev",w=f(),D=u("button"),D.textContent="Next",M=f(),k=u("div"),O=u("div"),O.innerHTML='<p class="calendar-date-text">星期一</p>',Y=f(),_=u("div"),_.innerHTML='<p class="calendar-date-text">星期二</p>',H=f(),L=u("div"),L.innerHTML='<p class="calendar-date-text">星期三</p>',F=f(),T=u("div"),T.innerHTML='<p class="calendar-date-text">星期四</p>',E=f(),W=u("div"),W.innerHTML='<p class="calendar-date-text">星期五</p>',C=f(),j=u("div"),j.innerHTML='<p class="calendar-date-text">星期六</p>',S=f(),A=u("div"),A.innerHTML='<p class="calendar-date-text">星期日</p>',P=f();for(let t=0;t<q.length;t+=1)q[t].c();this.c=t,g(o,"type","number"),g(y,"type","number"),v(x,"margin","20px 0"),g(O,"class","calendar-header"),g(_,"class","calendar-header"),g(L,"class","calendar-header"),g(T,"class","calendar-header"),g(W,"class","calendar-header"),g(j,"class","calendar-header"),g(A,"class","calendar-header"),g(k,"class","calendar"),v(k,"--calendar-date-width",pt)},m(t,r){c(t,n,r),i(n,a),i(a,o),m(o,e[0]),i(a,d),i(a,y),m(y,e[1]),i(n,b),i(n,x),i(x,$),i(x,w),i(x,D),i(n,M),i(n,k),i(k,O),i(k,Y),i(k,_),i(k,H),i(k,L),i(k,F),i(k,T),i(k,E),i(k,W),i(k,C),i(k,j),i(k,S),i(k,A),i(k,P);for(let t=0;t<q.length;t+=1)q[t].m(k,null);I||(N=[h(o,"input",e[9]),h(y,"input",e[10]),h($,"click",e[4]),h(D,"click",e[5])],I=!0)},p(t,[e]){if(1&e&&p(o.value)!==t[0]&&m(o,t[0]),2&e&&p(y.value)!==t[1]&&m(y,t[1]),14&e){let n;for(R=t[2],n=0;n<R.length;n+=1){const r=ut(t,R,n);q[n]?q[n].p(r,e):(q[n]=ht(r),q[n].c(),q[n].m(k,null))}for(;n<q.length;n+=1)q[n].d(1);q.length=R.length}},i:t,o:t,d(t){t&&s(n),l(q,t),I=!1,r(N)}}}let pt="160px";function yt(t,e,n){let r=""+t;for(;r.length<e;)r=n+r;return r}function mt(t,e,n){let{events:r=st}=e;const a=new Date;let o,i=a.getFullYear(),c=a.getMonth()+1;return t.$$set=t=>{"events"in t&&n(8,r=t.events)},t.$$.update=()=>{259&t.$$.dirty&&n(2,o=ct(i,c,r))},[i,c,o,a,function(){const{year:t,month:e}=V({year:i,month:c},-1);n(0,i=t),n(1,c=e)},function(){const{year:t,month:e}=V({year:i,month:c},1);n(0,i=t),n(1,c=e)},"100vh","100vw",r,function(){i=p(this.value),n(0,i)},function(){c=p(this.value),n(1,c)}]}class vt extends j{constructor(t){super(),this.shadowRoot.innerHTML="<style>.calendar{display:grid;width:calc((var(--calendar-date-width) + 1px) * 7);grid-template-columns:repeat(7, var(--calendar-date-width));grid-auto-rows:auto;grid-gap:1px;box-shadow:0 6.4px 14.4px 0 rgba(0, 0, 0, 0.132),\n      0 1.2px 3.6px 0 rgba(0, 0, 0, 0.108)}.calendar-header{box-shadow:0 0 0 1px rgb(236, 236, 236);display:flex;flex-direction:column;padding:0;font-weight:bold;cursor:default}.calendar-date{box-shadow:0 0 0 1px rgb(236, 236, 236);display:flex;flex-direction:column;padding:0;transition:ease-in 0.13s;height:130px;cursor:default;position:relative}.calendar-date:hover{background-color:rgba(128, 128, 128, 0.17)}.calendar-date-text{padding:0 10px}.calendar-event{color:black;background-color:rgb(0, 0, 255, 0.3);font-weight:normal;display:flex;justify-content:space-between;position:relative;padding:0 6px;align-items:center;height:30px;line-height:30px;cursor:pointer}.calendar-event::before{content:'';display:block;width:4px;height:100%;position:absolute;left:0;top:0;bottom:0;background-color:rgb(0, 0, 255, 0.7)}.grey{color:#9a9a9a;box-shadow:0 0 0 1px rgb(230, 230, 230);background-color:rgb(243 243 243)}.grey:hover{background-color:rgb(243 243 243)}.today{font-weight:bold}.today-mark{position:absolute;left:0;right:0;top:0;height:5px;background-color:rgb(9, 121, 226)}</style>",C(this,{target:this.shadowRoot},mt,gt,o,{height:6,width:7,events:8}),t&&(t.target&&c(t.target,this,t.anchor),t.props&&(this.$set(t.props),F()))}static get observedAttributes(){return["height","width","events"]}get height(){return this.$$.ctx[6]}get width(){return this.$$.ctx[7]}get events(){return this.$$.ctx[8]}set events(t){this.$set({events:t}),F()}}export{vt as Calendar};
//# sourceMappingURL=index.js.map
